# Operating System
1. 메모리

## 메모리 계층과 캐시
CPU는 메모리에 올라와 있는 프로그램의 명령어를 실행한다.

메모리 계층은 가장 위부터 레지스터, 캐시(L1, L2 캐시), 메모리(RAM)-주기억장치, 저장장치(HDD, SDD)-보조기억장치 순이다.

계층 위로 갈수록 용량은 작아지고 속도는 빨라진다. 

계층 아래로 갈수록 CPU와 멀어진다. 레지스터와 캐시는 CPU 내부에 존재한다.

**캐시(cache)**는 데이터를 미리 복사해 놓는 임시 저장소이다. 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리이다.

캐시는 다이나믹 프로그래밍의 메모이제이션(memoization)과 같다. 

캐시를 통해 데이터를 접근하는 시간이 오래 걸리는 경우를 해결한다. 또한 무언가를 다시 계산하는 시간을 절약할 수 있다.

실제로 RAM과 CPU 사이의 속도 차이가 너무 크기 때문에 그 중간에 레지스터 계층을 둬서 속도 차이를 해결한다. 이렇게 속도 차이를 해결하기 위해 계층과 계층 사이에 있는 계층을 **캐싱 계층**이라고 한다.

직접 캐시를 설정할 경우 자주 사용하는 데이터를 기반으로 설정한다. **시간 지역성**과 **공간 지역성**은 자주 사용하는 데이터에 대한 근거가 된다.

시간 지역성은 최근 사용한 데이터에 다시 접근하려는 특성이다. 그리고 공간 지역성은 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하려는 특성이다.

캐시에서 원하는 데이터를 찾았으면 **캐시 히트**라 한다. 반대로 해당 데이터가 캐시에 없다면 주 기억장치로 가서 데이터를 찾아온다. 이를 **캐시미스**라고 한다.

캐시히트를 하게 되면 제어장치가 CPU 내부 버스를 통해 캐시에서 데이터를 가져온다. 하지만 캐시미스가 발생하면 데이터를 시스템 메모리(RAM)에서 가져온다. 이는 시스템 버스를 통하므로 작동이 느리다.
